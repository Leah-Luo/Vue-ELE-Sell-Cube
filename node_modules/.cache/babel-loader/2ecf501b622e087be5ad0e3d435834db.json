{"remainingRequest":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/thread-loader/dist/cjs.js!/Users/LXIN/Desktop/vue-sell-cube/node_modules/babel-loader/lib/index.js??ref--16-2!/Users/LXIN/Desktop/vue-sell-cube/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/LXIN/Desktop/vue-sell-cube/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/LXIN/Desktop/vue-sell-cube/src/components/ratings/ratings.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/LXIN/Desktop/vue-sell-cube/src/components/ratings/ratings.vue","mtime":1612929996027},{"path":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFN0YXIgZnJvbSAnY29tcG9uZW50cy9zdGFyL3N0YXInOwppbXBvcnQgUmF0aW5nU2VsZWN0IGZyb20gJ2NvbXBvbmVudHMvcmF0aW5nLXNlbGVjdC9yYXRpbmctc2VsZWN0JzsKaW1wb3J0IFNwbGl0IGZyb20gJ2NvbXBvbmVudHMvc3BsaXQvc3BsaXQnOwppbXBvcnQgcmF0aW5nTWl4aW4gZnJvbSAnY29tbW9uL21peGlucy9yYXRpbmcnOwppbXBvcnQgeyBnZXRSYXRpbmdzIH0gZnJvbSAnYXBpJzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3JhdGluZ3MnLAogIG1peGluczogW3JhdGluZ01peGluXSwKICBwcm9wczogewogICAgZGF0YTogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByYXRpbmdzOiBbXSwKICAgICAgc2Nyb2xsT3B0aW9uczogewogICAgICAgIGNsaWNrOiBmYWxzZSwKICAgICAgICBkaXJlY3Rpb25Mb2NrVGhyZXNob2xkOiAwCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgc2VsbGVyOiBmdW5jdGlvbiBzZWxsZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmRhdGEuc2VsbGVyIHx8IHt9OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmZldGNoZWQpIHsKICAgICAgICB0aGlzLmZldGNoZWQgPSB0cnVlOwogICAgICAgIGdldFJhdGluZ3MoewogICAgICAgICAgaWQ6IHRoaXMuc2VsbGVyLmlkCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmF0aW5ncykgewogICAgICAgICAgX3RoaXMucmF0aW5ncyA9IHJhdGluZ3M7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdCh0aW1lKSB7CiAgICAgIHJldHVybiBtb21lbnQodGltZSkuZm9ybWF0KCdZWVlZLU1NLUREIGhoOm1tJyk7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBTdGFyOiBTdGFyLAogICAgU3BsaXQ6IFNwbGl0LAogICAgUmF0aW5nU2VsZWN0OiBSYXRpbmdTZWxlY3QKICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY3RUeXBlOiBmdW5jdGlvbiBzZWxlY3RUeXBlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJHJlZnMuc2Nyb2xsLnJlZnJlc2goKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ratings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA,OAAA,IAAA,MAAA,sBAAA;AACA,OAAA,YAAA,MAAA,wCAAA;AACA,OAAA,KAAA,MAAA,wBAAA;AACA,OAAA,WAAA,MAAA,sBAAA;AACA,SAAA,UAAA,QAAA,KAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,MAAA,EAAA,CAAA,WAAA,CAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAHA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,sBAAA,EAAA;AAFA;AAFA,KAAA;AAOA,GAhBA;AAiBA,EAAA,QAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,aAAA,KAAA,IAAA,CAAA,MAAA,IAAA,EAAA;AACA;AAHA,GAjBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,QAAA,UAAA,CAAA;AACA,UAAA,EAAA,EAAA,KAAA,MAAA,CAAA;AADA,SAAA,CAAA,CAEA,IAFA,CAEA,UAAA,OAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,OAAA;AACA,SAJA;AAKA;AACA,KAVA;AAWA,IAAA,MAXA,kBAWA,IAXA,EAWA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,CAAA,MAAA,CAAA,kBAAA,CAAA;AACA;AAbA,GAtBA;AAqCA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,KAAA,EAAA,KAFA;AAGA,IAAA,YAAA,EAAA;AAHA,GArCA;AA0CA,EAAA,KAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,OAAA;AACA,OAFA;AAGA;AALA;AA1CA,CAAA","sourcesContent":["<template>\n  <cube-scroll ref=\"scroll\" class=\"ratings\" :options=\"scrollOptions\">\n    <div class=\"ratings-content\">\n      <div class=\"overview\">\n        <div class=\"overview-left\">\n          <h1 class=\"score\">{{seller.score}}</h1>\n          <div class=\"title\">综合评分</div>\n          <div class=\"rank\">高于周边商家{{seller.rankRate}}%</div>\n        </div>\n        <div class=\"overview-right\">\n          <div class=\"score-wrapper\">\n            <span class=\"title\">服务态度</span>\n            <star :size=\"36\" :score=\"seller.serviceScore\"></star>\n            <span class=\"score\">{{seller.serviceScore}}</span>\n          </div>\n          <div class=\"score-wrapper\">\n            <span class=\"title\">商品评分</span>\n            <star :size=\"36\" :score=\"seller.foodScore\"></star>\n            <span class=\"score\">{{seller.foodScore}}</span>\n          </div>\n          <div class=\"delivery-wrapper\">\n            <span class=\"title\">送达时间</span>\n            <span class=\"delivery\">{{seller.deliveryTime}}分钟</span>\n          </div>\n        </div>\n      </div>\n      <split></split>\n      <rating-select\n        @select=\"onSelect\"\n        @toggle=\"onToggle\"\n        :selectType=\"selectType\"\n        :onlyContent=\"onlyContent\"\n        :ratings=\"ratings\"\n      >\n      </rating-select>\n      <div class=\"rating-wrapper\">\n        <ul>\n          <li\n            v-for=\"(rating,index) in computedRatings\"\n            :key=\"index\"\n            class=\"rating-item border-bottom-1px\"\n          >\n            <div class=\"avatar\">\n              <img width=\"28\" height=\"28\" :src=\"rating.avatar\">\n            </div>\n            <div class=\"content\">\n              <h1 class=\"name\">{{rating.username}}</h1>\n              <div class=\"star-wrapper\">\n                <star :size=\"24\" :score=\"rating.score\"></star>\n                <span class=\"delivery\" v-show=\"rating.deliveryTime\">{{rating.deliveryTime}}</span>\n              </div>\n              <p class=\"text\">{{rating.text}}</p>\n              <div class=\"recommend\" v-show=\"rating.recommend && rating.recommend.length\">\n                <span class=\"icon-thumb_up\"></span>\n                <span\n                  class=\"item\"\n                  v-for=\"(item,index) in rating.recommend\"\n                  :key=\"index\"\n                >\n                  {{item}}\n                </span>\n              </div>\n              <div class=\"time\">\n                {{format(rating.rateTime)}}\n              </div>\n            </div>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </cube-scroll>\n</template>\n\n<script>\nimport Star from 'components/star/star'\nimport RatingSelect from 'components/rating-select/rating-select'\nimport Split from 'components/split/split'\nimport ratingMixin from 'common/mixins/rating'\nimport { getRatings } from 'api'\nimport moment from 'moment'\n\nexport default {\n  name: 'ratings',\n  mixins: [ratingMixin],\n  props: {\n    data: {\n      type: Object\n    }\n  },\n  data () {\n    return {\n      ratings: [],\n      scrollOptions: {\n        click: false,\n        directionLockThreshold: 0\n      }\n    }\n  },\n  computed: {\n    seller () {\n      return this.data.seller || {}\n    }\n  },\n  methods: {\n    fetch () {\n      if (!this.fetched) {\n        this.fetched = true\n        getRatings({\n          id: this.seller.id\n        }).then((ratings) => {\n          this.ratings = ratings\n        })\n      }\n    },\n    format (time) {\n      return moment(time).format('YYYY-MM-DD hh:mm')\n    }\n  },\n  components: {\n    Star,\n    Split,\n    RatingSelect\n  },\n  watch: {\n    selectType () {\n      this.$nextTick(() => {\n        this.$refs.scroll.refresh()\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n@import \"~common/stylus/variable\"\n@import \"~common/stylus/mixin\"\n\n.ratings\n  position: relative\n  text-align: left\n  white-space: normal\n  height: 100%\n  .overview\n    display: flex\n    padding: 18px 0\n    .overview-left\n      flex: 0 0 137px\n      padding: 6px 0\n      width: 137px\n      border-right: 1px solid $color-col-line\n      text-align: center\n      @media only screen and (max-width: 320px)\n        flex: 0 0 120px\n        width: 120px\n      .score\n        margin-bottom: 6px\n        line-height: 28px\n        font-size: $fontsize-large-xxx\n        color: $color-orange\n      .title\n        margin-bottom: 8px\n        line-height: 12px\n        font-size: $fontsize-small\n        color: $color-dark-grey\n      .rank\n        line-height: 10px\n        font-size: $fontsize-small-s\n        color: $color-light-grey\n    .overview-right\n      flex: 1\n      padding: 6px 0 6px 24px\n      @media only screen and (max-width: 320px)\n        padding-left: 6px\n      .score-wrapper\n        display: flex\n        align-items: center\n        margin-bottom: 8px\n        .title\n          line-height: 18px\n          font-size: $fontsize-small\n          color: $color-dark-grey\n        .star\n          margin: 0 12px\n        .score\n          line-height: 18px\n          font-size: $fontsize-small\n          color: $color-orange\n      .delivery-wrapper\n        display: flex\n        align-items: center\n        .title\n          line-height: 18px\n          font-size: $fontsize-small\n          color: $color-dark-grey\n        .delivery\n          margin-left: 12px\n          font-size: $fontsize-small\n          color: $color-light-grey\n  .rating-wrapper\n    padding: 0 18px\n    .rating-item\n      display: flex\n      padding: 18px 0\n      &:last-child\n        border-none()\n      .avatar\n        flex: 0 0 28px\n        width: 28px\n        margin-right: 12px\n        img\n          height: auto\n          border-radius: 50%\n      .content\n        position: relative\n        flex: 1\n        .name\n          margin-bottom: 4px\n          line-height: 12px\n          font-size: $fontsize-small-s\n          color: $color-dark-grey\n        .star-wrapper\n          margin-bottom: 6px\n          display: flex\n          align-items: center\n          .star\n            margin-right: 6px\n          .delivery\n            font-size: $fontsize-small-s\n            color: $color-light-grey\n        .text\n          margin-bottom: 8px\n          line-height: 18px\n          color: $color-dark-grey\n          font-size: $fontsize-small\n        .recommend\n          display: flex\n          align-items: center\n          flex-wrap: wrap\n          line-height: 16px\n          .icon-thumb_up, .item\n            margin: 0 8px 4px 0\n            font-size: $fontsize-small-s\n          .icon-thumb_up\n            color: $color-blue\n          .item\n            padding: 0 6px\n            border: 1px solid $color-row-line\n            border-radius: 1px\n            color: $color-light-grey\n            background: $color-white\n        .time\n          position: absolute\n          top: 0\n          right: 0\n          line-height: 12px\n          font-size: $fontsize-small\n          color: $color-light-grey\n</style>\n"],"sourceRoot":"src/components/ratings"}]}
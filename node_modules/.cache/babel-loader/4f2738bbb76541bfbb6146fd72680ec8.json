{"remainingRequest":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/babel-loader/lib/index.js??ref--30-1!/Users/LXIN/Desktop/vue-sell-cube/node_modules/cube-ui/src/components/upload/util.js","dependencies":[{"path":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/cube-ui/src/components/upload/util.js","mtime":499162500000},{"path":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/LXIN/Desktop/vue-sell-cube/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0IHsgaW5Ccm93c2VyIH0gZnJvbSAnLi4vLi4vY29tbW9uL2hlbHBlcnMvZW52JzsKZXhwb3J0IHZhciBVUkwgPSBpbkJyb3dzZXIgPyB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkwgfHwgd2luZG93Lm1velVSTCA6IG51bGw7CmV4cG9ydCB2YXIgU1RBVFVTX1JFQURZID0gJ3JlYWR5JzsKZXhwb3J0IHZhciBTVEFUVVNfVVBMT0FESU5HID0gJ3VwbG9hZGluZyc7CmV4cG9ydCB2YXIgU1RBVFVTX0VSUk9SID0gJ2Vycm9yJzsKZXhwb3J0IHZhciBTVEFUVVNfU1VDQ0VTUyA9ICdzdWNjZXNzJzsKZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NGaWxlcyhmaWxlcywgZWFjaFByb2Nlc3NGaWxlLCBlYWNoQ2IsIGNiKSB7CiAgdmFyIGZpbGVJdGVtcyA9IFtdOwogIHZhciBsZW4gPSBmaWxlcy5sZW5ndGg7CiAgdmFyIHByb2Nlc3NlZExlbiA9IDA7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgIHByb2Nlc3NGaWxlKGZpbGVzW2ldLCBpLCBlYWNoUHJvY2Vzc0ZpbGUsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICBwcm9jZXNzZWRMZW4rKzsKICAgICAgZmlsZUl0ZW1zW2luZGV4XSA9IGl0ZW07CiAgICAgIGVhY2hDYihpdGVtLCBpbmRleCk7CgogICAgICBpZiAocHJvY2Vzc2VkTGVuID09PSBsZW4pIHsKICAgICAgICByZXR1cm4gY2IoZmlsZUl0ZW1zKTsKICAgICAgfQogICAgfSk7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzRmlsZShmaWxlLCBpLCBlYWNoUHJvY2Vzc0ZpbGUsIGNiKSB7CiAgZWFjaFByb2Nlc3NGaWxlKGZpbGUsIGZ1bmN0aW9uIChmaWxlKSB7CiAgICB2YXIgaXRlbSA9IG5ld0ZpbGUoZmlsZS5uYW1lLCBmaWxlLnNpemUsIFNUQVRVU19SRUFEWSwgMCwgZmlsZSk7CiAgICBjYihpdGVtLCBpKTsKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gbmV3RmlsZSgpIHsKICB2YXIgbmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CiAgdmFyIHNpemUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7CiAgdmFyIHN0YXR1cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7CiAgdmFyIHByb2dyZXNzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAwOwogIHZhciBmaWxlID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiBudWxsOwogIHZhciBiYXNlNjQgPSBmaWxlICYmIGZpbGUuYmFzZTY0IHx8ICcnOwogIHZhciB1cmwgPSBiYXNlNjQgPyAnJyA6IGNyZWF0ZVVSTChmaWxlKTsKICByZXR1cm4gewogICAgbmFtZTogbmFtZSwKICAgIHNpemU6IHNpemUsCiAgICB1cmw6IHVybCwKICAgIGJhc2U2NDogYmFzZTY0LAogICAgc3RhdHVzOiBzdGF0dXMsCiAgICBwcm9ncmVzczogcHJvZ3Jlc3MsCiAgICBmaWxlOiBmaWxlCiAgfTsKfQoKZnVuY3Rpb24gY3JlYXRlVVJMKGZpbGUpIHsKICBpZiAoZmlsZSAmJiBVUkwpIHsKICAgIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwogIH0KCiAgcmV0dXJuICcnOwp9CgpleHBvcnQgZnVuY3Rpb24gZXZhbE9wdHMoZGF0YSkgewogIGlmICh0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJykgewogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgIH0KCiAgICByZXR1cm4gZGF0YS5hcHBseSh0aGlzLCBhcmdzKTsKICB9CgogIHJldHVybiBkYXRhOwp9"},{"version":3,"sources":["/Users/LXIN/Desktop/vue-sell-cube/node_modules/cube-ui/src/components/upload/util.js"],"names":["inBrowser","URL","window","webkitURL","mozURL","STATUS_READY","STATUS_UPLOADING","STATUS_ERROR","STATUS_SUCCESS","processFiles","files","eachProcessFile","eachCb","cb","fileItems","len","length","processedLen","i","processFile","item","index","file","newFile","name","size","status","progress","base64","url","createURL","createObjectURL","evalOpts","data","args","apply"],"mappings":"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","sourcesContent":["import { inBrowser } from '../../common/helpers/env'\n\nexport const URL = inBrowser ? window.URL || window.webkitURL || window.mozURL : null\n\nexport const STATUS_READY = 'ready'\nexport const STATUS_UPLOADING = 'uploading'\nexport const STATUS_ERROR = 'error'\nexport const STATUS_SUCCESS = 'success'\n\nexport function processFiles(files, eachProcessFile, eachCb, cb) {\n  const fileItems = []\n  const len = files.length\n  let processedLen = 0\n  for (let i = 0; i < len; i++) {\n    processFile(files[i], i, eachProcessFile, function (item, index) {\n      processedLen++\n      fileItems[index] = item\n      eachCb(item, index)\n      if (processedLen === len) {\n        return cb(fileItems)\n      }\n    })\n  }\n}\n\nexport function processFile(file, i, eachProcessFile, cb) {\n  eachProcessFile(file, function (file) {\n    const item = newFile(file.name, file.size, STATUS_READY, 0, file)\n    cb(item, i)\n  })\n}\n\nexport function newFile(name = '', size = 0, status = '', progress = 0, file = null) {\n  const base64 = (file && file.base64) || ''\n  const url = base64 ? '' : createURL(file)\n\n  return {\n    name,\n    size,\n    url,\n    base64,\n    status,\n    progress,\n    file\n  }\n}\n\nfunction createURL(file) {\n  if (file && URL) {\n    return URL.createObjectURL(file)\n  }\n  return ''\n}\n\nexport function evalOpts(data, ...args) {\n  if (typeof data === 'function') {\n    return data.apply(this, args)\n  }\n  return data\n}\n"]}]}